<?php
//Copyright (c) 2016 iFeiwu.com
 class Trash extends Item { function __construct() { $this->table = "\x74\162\x61\x73\x68"; parent::__construct(); } protected function postDelete($request_data) { goto BHvzb; cGdQf: $this->db->rollBack(); goto PKd6M; fTAyA: return $this->success(); goto CMQy0; uXuwX: Fa_Jb: goto MNftp; f9haQ: foreach ($ids as $id) { goto F02YR; XULuh: Xxv4d: goto N9mLV; YRilS: $error[] = $trash["\164\x69\164\154\145"]; goto FepPk; N9mLV: WCeGx: goto MVzgp; FepPk: goto Xxv4d; goto Co9gp; j3LcC: if ($this->db->delete($this->table, array("\151\144", "\x3d", $id))->is()) { goto HntoU; } goto YRilS; Co9gp: HntoU: goto bZa0K; YSTti: $this->_rmdir("\56\56\x2f" . $path); goto KmPE6; ci8jb: $path = $trash["\160\141\164\x68"]; goto j3LcC; bZa0K: if (!($path && count(explode("\57", $path)) >= 2)) { goto YOD_n; } goto YSTti; KmPE6: YOD_n: goto XULuh; F02YR: $trash = $this->db->select($this->table)->where(array("\151\144", "\75", $id))->get(); goto ci8jb; MVzgp: } goto yXCol; CMQy0: EENWV: goto J59yR; bk0Yu: $ids = $request_data["\151\144"]; goto Ps5ob; BHvzb: $error = array(); goto bk0Yu; Ys3bE: goto EENWV; goto uXuwX; o0tPP: $this->_log("\144\145\154\x65\164\145", array("\x74\x69\x74\154\x65" => count($ids))); goto fTAyA; yXCol: BeQC9: goto QUY1J; Ps5ob: $this->db->beginTransaction(); goto f9haQ; PKd6M: return $this->error(); goto Ys3bE; MNftp: $this->db->commit(); goto o0tPP; QUY1J: if (count($error) === 0) { goto Fa_Jb; } goto cGdQf; J59yR: } protected function postReplay($request_data) { goto B7bOD; efwhV: $this->db->beginTransaction(); goto Udlz9; B7bOD: $error = array(); goto B3wg6; K83Ri: $this->_log("\x72\145\x70\154\x79", array("\164\x69\164\154\x65" => count($ids))); goto vOwkW; Udlz9: foreach ($ids as $id) { goto KWNU8; NY16d: $this->db->delete($this->table, array("\151\x64", "\75", $id)); goto oFGXT; EZICE: cMwb9: goto KCvuu; KWNU8: $trash = $this->db->select($this->table)->where(array("\x69\x64", "\75", $id))->get(); goto OznPN; oFGXT: goto lvjgH; goto bAh_O; tPy1X: if ($isadd === false) { goto YZadb; } goto NY16d; OznPN: $table = $trash["\164\141\142\x6c\145"]; goto NuLbV; NuLbV: $isadd = $this->db->insert($table, json_decode($trash["\x64\x61\164\x61"], true)); goto tPy1X; UxCRs: $error[] = $trash["\x74\x69\x74\154\145"]; goto aYtFa; aYtFa: lvjgH: goto EZICE; bAh_O: YZadb: goto UxCRs; KCvuu: } goto NCmt9; wVBhb: $this->db->rollBack(); goto MZQBU; NCmt9: IOk5f: goto YvmWq; lKCLr: goto CsNHw; goto AzP5t; MZQBU: return $this->error(); goto lKCLr; B3wg6: $ids = $request_data["\151\x64"]; goto efwhV; XsyJG: CsNHw: goto BotF4; YvmWq: if (count($error) === 0) { goto gm8T9; } goto wVBhb; dvYnK: $this->db->commit(); goto K83Ri; AzP5t: gm8T9: goto dvYnK; vOwkW: return $this->success(); goto XsyJG; BotF4: } }
