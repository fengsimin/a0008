<?php
//Copyright (c) 2016 iFeiwu.com
 class Site extends Item { function __construct() { $this->table = "\x73\x69\164\145"; parent::__construct(); } protected function getData() { goto Z_2Gd; GaUxG: foreach ($data as $d) { goto F5SvF; F5SvF: $value = $d["\166\x61\x6c\165\145"]; goto Aju6T; sp5NC: $site[$d["\156\x61\155\145"]] = $value; goto HKrat; Aju6T: if (!($value != '')) { goto VFAMh; } goto sp5NC; HKrat: VFAMh: goto QfH_2; QfH_2: SjSFJ: goto M3N0R; M3N0R: } goto M_qF5; Z_2Gd: $data = $this->db->select($this->table)->all(); goto RxiSR; M_qF5: pCtZo: goto CS6pc; RxiSR: $site = array(); goto GaUxG; CS6pc: return $this->success($site); goto Pyliw; Pyliw: } protected function postSave($request_data) { goto u4hk5; xN7Vv: foreach ($request_data as $name => $value) { goto F848U; EAjO3: Ybuge: goto PNtbg; NqJPm: goto XuNNK; goto nmMyW; NWycQ: ATqfe: goto NqJPm; Os_dP: $value = $this->_encode($value); goto a8dIw; nmMyW: ixrJI: goto wg3mA; KtBed: $error[] = $name; goto NWycQ; wg3mA: if (!($this->db->insert($this->table, array("\x6e\141\x6d\145" => $name, "\166\141\154\x75\145" => $value))->is() === false)) { goto jA4l6; } goto Do5_k; nERnn: XuNNK: goto EAjO3; YNx_E: if (!($this->db->update($this->table, array("\x76\x61\154\x75\145" => $value), array("\156\x61\155\145", "\x3d", $name))->is() === false)) { goto ATqfe; } goto KtBed; nVcpC: jA4l6: goto nERnn; F848U: $count = $this->db->select($this->table)->where(array("\156\141\x6d\x65", "\x3d", $name))->count(); goto Os_dP; Do5_k: $error[] = $name; goto nVcpC; a8dIw: if ($count <= 0) { goto ixrJI; } goto YNx_E; PNtbg: } goto iM104; CV1c5: $this->_log("\165\160\144\x61\164\145", array("\164\151\x74\154\145" => "\347\xbd\221\347\xab\231\xe8\256\xbe\347\275\256")); goto CyctB; xSzU3: $this->db->beginTransaction(); goto xN7Vv; OSTWo: $this->db->commit(); goto CV1c5; wg3XP: $this->db->rollBack(); goto AZoNU; iM104: enT2o: goto awets; u4hk5: $this->_removeFiles2($request_data["\137\162\x65\155\157\x76\145\x66\151\154\145\x73"]); goto uZ8Pf; AZoNU: return $this->error("\345\267\xb2\xe4\xbf\x9d\345\255\230\345\244\xb1\xe8\264\245\357\274\201"); goto jbgpS; RW2LR: IAd5X: goto OSTWo; CyctB: return $this->success("\345\267\262\xe4\xbf\235\345\xad\230\346\x9b\264\xe6\224\xb9\357\274\x81"); goto lNHEZ; awets: if (count($error) === 0) { goto IAd5X; } goto wg3XP; jbgpS: goto D9FeS; goto RW2LR; uZ8Pf: unset($request_data["\x74\157\x6b\x65\x6e"], $request_data["\141\144\155\x69\x6e"], $request_data["\137\162\145\155\157\166\x65\x66\x69\x6c\145\x73"]); goto QPOKJ; lNHEZ: D9FeS: goto xjKLO; QPOKJ: $error = array(); goto xSzU3; xjKLO: } protected function postSkin($request_data) { goto S_tks; p32F3: $filename = "\56\56\57\x61\163\163\x65\164\x2f\x63\x73\x73\x2f\x73\164\171\154\145\56\143\163\163"; goto NMs3B; HOfAK: HfcNq: goto Gb3WV; yQo0P: $request_data["\164\150\145\155\x65"] = $skins[0]; goto PqmLg; Gb3WV: unset($request_data["\164\x6f\x6b\x65\x6e"], $request_data["\x61\x64\155\151\x6e"], $request_data["\x73\164\x79\x6c\145\x2d\143\x6f\144\x65"]); goto ChSZZ; PqmLg: $request_data["\x73\153\151\156"] = $skins[1]; goto L7bQ_; FrqC4: return $this->success("\345\xb7\xb2\xe4\xbf\235\xe5\255\x98\xe6\x9b\264\346\x94\271\357\xbc\201"); goto W7pdW; b_5k1: EUCVR: goto FrqC4; S_tks: if (!isset($request_data["\163\164\x79\x6c\145\55\x63\157\144\145"])) { goto HfcNq; } goto p32F3; CWGF5: $skins = explode("\x2d", $request_data["\164\x68\145\155\x65\x2d\163\x6b\x69\156"]); goto yQo0P; is9oi: chmod($filename, 420); goto HOfAK; NMs3B: file_put_contents($filename, $request_data["\163\164\171\x6c\145\55\x63\157\144\145"]); goto is9oi; L7bQ_: LEzPZ: goto Vt54w; ChSZZ: if (!isset($request_data["\x74\150\x65\x6d\145\x2d\163\153\x69\x6e"])) { goto LEzPZ; } goto CWGF5; Vt54w: foreach ($request_data as $name => $value) { $this->_saveData($this->table, array("\156\141\155\x65" => $name, "\166\x61\154\x75\145" => $value), array("\156\x61\155\145", "\x3d", $name)); muTVY: } goto b_5k1; W7pdW: } protected function getStyleCode() { $code = file_get_contents("\56\56\x2f\x61\x73\163\x65\x74\x2f\143\163\x73\57\x73\164\171\154\145\x2e\143\x73\163"); return $this->success(array($code)); } }
